# Lecture 5 - Routing and JSON
## Routing in Express
The Express template generated by express generator starts the app in the `bin/www.js` file. It then goes to the `app.js` file, which defines the routes and routers for a given route.

```js
// app.js //
// the index router
import { indexRouter } from 'IndexRouter.js';

...

// express app using routers
const app = express();

// send all traffic to '/' to indexRouter 
app.use('/', indexRouter);

...
```
```js
// IndexRouter.js //
import express from 'express';
var router = express.Router();

/* GET home page. */
router.get('/', function(req, res, next) {
  res.render('index', { title: 'Express' });
});

export default router;
```
This particular line in the express project generator allows express to servce static files in the `public` directory without you having to manually write one for each page:
```js
...
app.use(express.static(path.join(__dirname, 'public')));
...
```

## JSON Data
JSON Objects are a way of storing information. They key is the a string and the value can be a string, number, array, or another json object.
```json
{
    "key": "value",
    "another_key": 3,
    "yet_another_key": [1, 4, 6]
}
```
They're commonly used to transport information between various applications. We can send JSON objects in response to an HTML request.
```js
const router = express.Router();

// returns users object from file system
router.get('/getUsers', async (req, res, next) => {
    const data = await fs.readFile("someJsonFile.json");
    res.send(data.json());
});
```

## Other HTTP Request Methods
So far, we've only been using GET, but there's [a lot](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods) of them. They all have different purposes, but they're all set up in the same way.

```js
// Client-Side Code //
const someEndpoint = "endpoint/endpoint";
const someData = { ... };

// sends a POST request to someEndpoint with a payload in body
const response = await fetch(someEndpoint, {
    method: "POST",
    body: JSON.stringify(someData),
    headers: {
        'Content-Type': 'application/json'
    }
});
```
```js
// Server-Side Code //
router.post('/endpoint', await (req, res, next) => {
    // get the body from the request
    const payload = req.body;

    // parse the data into useful stuff again
    const data = JSON.parse(payload);

    // do something with the data
    await fs.writeFile(someFilePath, data);
});
```